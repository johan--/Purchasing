
=hb 'modal-dialog action="closeModal"' do

  .modal-header
    %button.close{ type: 'button', 'data-dismiss' => 'modal', 'aria-hidden' => 'true' }
      =fa_icon 'times'
    %h2 Edit Canned Messages

  .modal-body
    %table.table.table-striped.table-hover.tags_list
      %tbody

        =hb 'each' do
          %tr{ bind: { class: ':tag isEditing' } }

            =hb 'if isEditing' do
              %td{ colspan: 3 }
                .form-group
                  %label Name
                  =hb 'view App.EditFocasableInput value=name maxlength=50 class="form-control"'

                .form-group
                  %label Subject
                  =hb 'input value=subject class="form-control"'

                .form-group
                  %label Text
                  =hb 'textarea value=text rows=3 class="form-control"'

                .form-group
                  %label Note to add after successful email
                  =hb 'input value=note_text class="form-control"'

                .col-xs-6
                  .form-group
                    %label Default To
                    =hb 'view Ember.Select value=default_to content=urlDefaults class="form-control"'

                .col-xs-6
                  .form-group
                    %label Default CC
                    =hb 'view Ember.Select value=default_cc content=urlDefaults class="form-control"'

                .pull-right
                  %button{ class: 'btn btn-link', _action: 'stopEditing', 'data-toggle' => 'tooltip', title: 'Stop editing canned message' }
                    Cancel
                  %button{ class: 'btn btn-success', _action: 'saveMessage', 'data-toggle' => 'tooltip', title: 'Save changes to canned message' }
                    Save

              =hb 'else'

              %td{ _action: 'startEditing', 'data-toggle' => 'tooltip', title: 'Click to edit' }
                =hb 'name'

              %td{ _action: 'startEditing', 'data-toggle' => 'tooltip', title: 'Click to edit' }
                =hb 'subject'

              =hb 'if model.can_delete' do
                %td.delete_container.controls
                  .delete{ _action: 'deleteMessage', 'data-toggle' => 'tooltip', title: 'Delete canned message' }
                    =fa_icon 'times'

  .modal-footer
    =hb 'unless isEditing' do
      %button{ class: 'btn btn btn-link', 'data-dismiss' => 'modal', 'aria-hidden' => 'true', 'data-toggle' => 'tooltip', title: 'Cancel editing canned message' }
        =fa_icon 'rotate-left'
        Close

      %button{ class: 'btn btn-lg btn-success', _action: 'createMessage', 'data-toggle' => 'tooltip', title: 'Create a new canned message' }
        =fa_icon 'plus'
        Create Record
