=hb 'modal-dialog action="closeModal"' do

  .modal-header
    %button.close{ type: 'button', 'data-dismiss' => 'modal', 'aria-hidden' => 'true' }
      =fa_icon 'times'
    %h2 Edit Tags

  .modal-body
    %table.table.table-striped.table-hover.tags_list
      %tbody

        =hb 'each' do
          %tr{ bind: { class: ':tag isEditing' } }

            =hb 'if isEditing' do

              %td
                =hb 'view App.EditFocasableInput value=name maxlength=30 class="form-control"'
              %td
                %button{ class: 'btn btn-link', _action: 'stopEditing', 'data-toggle' => 'tooltip', title: 'Stop editing tag' }
                  Cancel
                %button{ class: 'btn btn-success', _action: 'saveTag', 'data-toggle' => 'tooltip', title: 'Save changes to tag' }
                  Save

              =hb 'else'

              %td{ _action: 'startEditing', 'data-toggle' => 'tooltip', title: 'Click to edit' }
                %label=hb 'name'

              -permitted_to? :delete, :tags do
                %td.delete_container.controls
                  .delete{ _action: 'deleteTag', 'data-toggle' => 'tooltip', title: 'Delete tag<br/>(Note: cannot delete a tag if it used by a purchase requisition)' }
                    =fa_icon 'times'

  .modal-footer
    %button{ class: 'btn btn btn-link', 'data-dismiss' => 'modal', 'aria-hidden' => 'true', 'data-toggle' => 'tooltip', title: 'Cancel editing tag' }
      =fa_icon 'rotate-left'
      Close
    %button{ class: 'btn btn-lg btn-success', _action: 'createTag', 'data-toggle' => 'tooltip', title: 'Save changes to tag' }
      =fa_icon 'plus'
      Add Record
