
=hb 'view App.NotificationView'

%div{ bind: { class: ':edit_box isCancelled isReconciled' } }
  %div{ bind: { class: ':title_bar :row isCancelled:strikethrough' } }
    =hb 'if isEditing' do
      =hb 'partial "purchase/header_edit"'
      =hb 'else'
      =hb 'partial "purchase/header_show"'

  .top_info.row
    =hb 'if isEditing' do
      =hb 'partial "purchase/top_edit"'
      =hb 'else'
      =hb 'partial "purchase/top_show"'

  .middle_info.row
    -if permitted_to? :read, :line_items
      =hb 'render "LineItems" lineItems'

    -if permitted_to? :read, :receivings
      =hb 'render "Receivings" receivings'

  .bottom_info.row
    .col-lg-8.notes
      -if permitted_to? :read, :notes
        =hb 'render "Notes" notes'

      -if permitted_to? :read, :tags
        =hb 'render "Tags" tags'

    .col-lg-4
      =hb 'partial "purchase/accounting"'

    .row
      .col-lg-8
        =hb 'partial "purchase/bottom_left_controls"'

      .col-lg-4
        =hb 'partial "purchase/submit_controls"'

  =hb 'render attachments this.attachments'

  .main_spinner
    =fa_icon 'spinner spin'

